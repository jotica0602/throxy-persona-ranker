'use strict'
const fs = require('fs')
const path = require('path')

const csvPath = path.join(process.cwd(), 'data/eval/eval_set.csv')
const outPath = path.join(process.cwd(), 'lib/eval-set-csv.ts')

if (!fs.existsSync(csvPath)) {
  console.warn('embed-eval-csv: data/eval/eval_set.csv not found, skipping.')
  process.exit(0)
}

let content = fs.readFileSync(csvPath, 'utf-8')
// Escape for template literal: \ and `
content = content.replace(/\\/g, '\\\\').replace(/`/g, '\\`')

const ts = `// Generated by scripts/embed-eval-csv.js â€” do not edit
export const EVAL_CSV_CONTENT = \`${content}\`
`

fs.writeFileSync(outPath, ts, 'utf-8')
console.log('embed-eval-csv: wrote lib/eval-set-csv.ts')
